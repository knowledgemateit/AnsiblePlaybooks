- name: Create AWS VPC and related network components
  hosts: localhost
  connection: local
  gather_facts: false
  tasks:
    - name: Create a new VPC
      amazon.aws.ec2_vpc_net:
        name: my-ansible-vpc
        cidr_block: "10.0.0.0/16"
        region: "us-east-1"
        dns_hostnames: true
        dns_support: true
        state: present
      register: vpc_output
      # The 'register' keyword saves the module's output to a variable 
      # for use in subsequent tasks (e.g., getting the new VPC ID).

    - name: Display VPC ID
      debug:
        msg: "The newly created VPC ID is {{ vpc_output.vpc.id }}"

    # Additional tasks would follow to create subnets, internet gateways, etc., 
    # using modules like ec2_vpc_subnet, ec2_vpc_igw, and ec2_vpc_route_table.
